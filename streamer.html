<!DOCTYPE html>
<html>
<head>
  <title>Streamer</title>
</head>
<body>
  <h1>🎥 Streamer</h1>
  <video id="video" autoplay muted></video>

  <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>
    const video = document.getElementById("video");

    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => {
        video.srcObject = stream;

        const peer = new Peer("webclubtv.fr", {
          host: "0.peerjs.com",
          port: 443,
          secure: true
        });

        peer.on("open", id => {
          console.log("Streamer ID :", id);
        });

        peer.on("call", call => {
          console.log("📞 Appel reçu !");
          call.answer(stream);
        });

        peer.on("error", err => {
          console.error("Erreur PeerJS :", err);
        });
      })
      .catch(err => {
        console.error("Erreur d'accès à la webcam :", err);
      });
  </script>
</body>
</html>
mise a jour 25
