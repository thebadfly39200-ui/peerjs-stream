<!DOCTYPE html>
<html>
<head>
  <title>Streamer</title>
</head>
<body>
  <h1>🎥 Streamer</h1>
  <video id="video" autoplay muted></video>

 <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
<script>
  const peer = new Peer(); // ID automatique

  peer.on("open", (id) => {
    console.log("🟢 Streamer prêt avec ID :", id);
    document.getElementById("streamer-id").textContent = id;
  });

  navigator.mediaDevices.getUserMedia({ video: true, audio: true })
    .then((stream) => {
      console.log("📹 Flux capturé");
      peer.on("call", (call) => {
        console.log("📞 Appel reçu du viewer");
        call.answer(stream);
      });
    })
    .catch((err) => {
      console.error("🚨 Erreur de capture :", err);
    });
</script>

<p>ID du streamer : <span id="streamer-id">...</span></p>
</body>
</html>
mise a jour 240
