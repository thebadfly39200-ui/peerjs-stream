<!DOCTYPE html>
<html>
<head>
  <title>Viewer</title>
</head>
<body>
  <h1>ðŸ‘€ Viewer</h1>
  <video id="video" autoplay playsinline></video>

  <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>
    const video = document.getElementById("video");

    const peer = new Peer(null, {
      host: "peerjs.com",
      port: 443,
      secure: true
    });

    peer.on("open", id => {
      console.log("Viewer ID :", id);
      console.log("ðŸ“ž Appel vers le streamer...");

      // Flux vide requis pour certains navigateurs
      navigator.mediaDevices.getUserMedia({ video: false, audio: false })
        .then(dummyStream => {
          const mediaConnection = peer.call("webclubtv.fr", dummyStream);

          mediaConnection.on("stream", stream => {
            console.log("ðŸ“º Flux reÃ§u !");
            video.srcObject = stream;
          });

          mediaConnection.on("error", err => {
            console.error("Erreur dâ€™appel :", err);
          });

          mediaConnection.on("close", () => {
            console.log("ðŸ“´ Connexion fermÃ©e");
          });
        })
        .catch(err => {
          console.error("Erreur dâ€™accÃ¨s au micro/camÃ©ra :", err);
        });
    });

    peer.on("error", err => {
      console.error("Erreur PeerJS :", err);
    });
  </script>
</body>
</html>

&&&&
22
