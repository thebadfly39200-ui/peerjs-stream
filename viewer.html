<!DOCTYPE html>
<html>
<head>
  <title>Viewer</title>
</head>
<body>
  <h1>ðŸ‘€ Viewer</h1>
  <video id="video" autoplay></video>

  <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>
    const video = document.getElementById("video");

    const peer = new Peer(null, {
      host: "peerjs.com",
      port: 443,
      secure: true
    });

    peer.on("open", id => {
      console.log("Viewer ID :", id);

      navigator.mediaDevices.getUserMedia({ video: false, audio: false })
        .then(dummyStream => {
          const mediaConnection = peer.call("webclubtv.fr", dummyStream);

          mediaConnection.on("stream", stream => {
            console.log("ðŸ“º Stream reÃ§u !");
            video.srcObject = stream;
          });

          mediaConnection.on("error", err => {
            console.error("Erreur dâ€™appel :", err);
          });

          mediaConnection.on("close", () => {
            console.log("ðŸ“´ Connexion fermÃ©e");
          });
        });
    });
  </script>
</body>
</html>
